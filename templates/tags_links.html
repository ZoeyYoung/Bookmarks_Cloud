{% extends 'tabbable.html' %}
{% block links_pane %}
    <h3>{{cur_tag}} ({{tag_count}} 个书签):</h3>
    <ul id="linkList">
    {% for link in links %}
        {% module Link(link) %}
    {% end %}
    </ul>
    <div class="pagination">
        <ul class="pager">
            {% if page.has_prev %}
            <li class="previous"><a href="/tag/{{page.cur-1}}/{{cur_tag}}">上一页</a></li>
            <li><a href="/tag/1/{{cur_tag}}"><<</a></li>
            {% end %}
            {% if page.cur < 6 %}
                {% if page.last_page >= 10 %}
                {% set max=11 %}
                {% else %}
                {% set max=int(page.last_page+1) %}
                {% end %}
                {% for i in range(1, max) %}
                    <li><a href="/tag/{{i}}/{{cur_tag}}">{{i}}</a></li>
                {% end %}
            {% elif page.cur > page.last_page - 5 %}
                {% for i in range(page.last_page - 9, page.last_page + 1) %}
                    <li><a href="/tag/{{i}}/{{cur_tag}}">{{i}}</a></li>
                {% end %}
            {% else %}
                {% for i in range(page.cur-5, page.cur+5) %}
                    <li><a href="/tag/{{i}}/{{cur_tag}}">{{i}}</a></li>
                {% end %}
            {% end %}
            {% if page.has_next %}
            <li><a href="/tag/{{page.last_page}}/{{cur_tag}}">>></a></li>
            <li class="next"><a href="/tag/{{page.cur+1}}/{{cur_tag}}">下一页</a></li>
            {% end %}
        </ul>
    </div>
{% end %}